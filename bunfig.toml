# op1 Bun Configuration
# Isolated installs for pnpm-like strictness (prevents phantom dependencies)

# Module aliasing - redirect sharp to our stub (sharp not needed for text embeddings)
[resolve]
alias = { "sharp" = "./packages/stubs/sharp/index.js" }

[install]
# Use isolated linking (similar to pnpm strict mode)
# Each package only sees its declared dependencies
auto = "fallback"

[install.lockfile]
# Use text lockfile for better git diffs
save = true

# Bun Test Configuration
[test]
# Global test setup (mocks, environment variables)
preload = ["./test-setup.ts"]

# Timeout for slow integration tests (10 seconds)
timeout = 10000

# Coverage configuration
coverage = true
